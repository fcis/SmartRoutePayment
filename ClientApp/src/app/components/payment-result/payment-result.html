<div class="payment-result-container">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="spinner"></div>
    <p>Processing payment result...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="!isLoading && errorMessage && !paymentResponse" class="error-container">
    <div class="error-icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="15" y1="9" x2="9" y2="15"></line>
        <line x1="9" y1="9" x2="15" y2="15"></line>
      </svg>
    </div>
    <h2>Error</h2>
    <p class="error-message">{{ errorMessage }}</p>
    <button class="btn-primary" (click)="backToPayment()">Back to Payment</button>
  </div>

  <!-- Payment Result -->
  <div *ngIf="!isLoading && paymentResponse" class="result-content">
    <!-- Status Header -->
    <div class="status-header" [ngClass]="{'success': isSuccess, 'failure': !isSuccess}">
      <div class="status-icon">
        <!-- Success Icon -->
        <svg *ngIf="isSuccess" xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
          <polyline points="22 4 12 14.01 9 11.01"></polyline>
        </svg>
        <!-- Failure Icon -->
        <svg *ngIf="!isSuccess" xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="15" y1="9" x2="9" y2="15"></line>
          <line x1="9" y1="9" x2="15" y2="15"></line>
        </svg>
      </div>
      <h1 class="status-title">{{ statusMessage }}</h1>
      <p class="status-description">{{ paymentResponse.statusDescription }}</p>
    </div>

    <!-- Transaction Details Card -->
    <div class="details-card">
      <h2 class="card-title">Transaction Details</h2>
      
      <!-- Amount -->
      <div class="detail-row highlight">
        <span class="detail-label">Amount</span>
        <span class="detail-value amount">{{ paymentResponse.displayAmount }}</span>
      </div>

      <!-- Transaction ID -->
      <div class="detail-row">
        <span class="detail-label">Transaction ID</span>
        <span class="detail-value">
          {{ paymentResponse.transactionId }}
          <button class="copy-btn" (click)="copyTransactionId()" title="Copy Transaction ID">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
          </button>
        </span>
      </div>

      <!-- Date & Time -->
      <div class="detail-row">
        <span class="detail-label">Date & Time</span>
        <span class="detail-value">{{ currentDate | date:'dd/MM/yyyy HH:mm:ss' }}</span>
      </div>

      <!-- Status Code -->
      <div class="detail-row">
        <span class="detail-label">Status Code</span>
        <span class="detail-value">
          <span class="status-badge" [ngClass]="{'success-badge': isSuccess, 'error-badge': !isSuccess}">
            {{ paymentResponse.statusCode }}
          </span>
        </span>
      </div>

      <!-- Approval Code -->
      <div class="detail-row" *ngIf="paymentResponse.approvalCode">
        <span class="detail-label">Approval Code</span>
        <span class="detail-value">{{ paymentResponse.approvalCode }}</span>
      </div>

      <!-- RRN (Retrieval Reference Number) -->
      <div class="detail-row" *ngIf="paymentResponse.rrn">
        <span class="detail-label">Reference Number (RRN)</span>
        <span class="detail-value">{{ paymentResponse.rrn }}</span>
      </div>
    </div>

    <!-- Card Information Card -->
    <div class="details-card">
      <h2 class="card-title">Card Information</h2>
      
      <div class="detail-row">
        <span class="detail-label">Card Number</span>
        <span class="detail-value card-number">{{ paymentResponse.cardNumber }}</span>
      </div>

      <div class="detail-row">
        <span class="detail-label">Cardholder Name</span>
        <span class="detail-value">{{ paymentResponse.cardHolderName }}</span>
      </div>

      <div class="detail-row" *ngIf="paymentResponse.cardExpiryDate && paymentResponse.cardExpiryDate !== '*****'">
        <span class="detail-label">Expiry Date</span>
        <span class="detail-value">{{ paymentResponse.cardExpiryDate }}</span>
      </div>
    </div>

    <!-- Gateway Information Card -->
    <div class="details-card">
      <h2 class="card-title">Gateway Information</h2>
      
      <div class="detail-row">
        <span class="detail-label">Gateway Name</span>
        <span class="detail-value">{{ paymentResponse.gatewayName }}</span>
      </div>

      <div class="detail-row">
        <span class="detail-label">Gateway Status</span>
        <span class="detail-value">{{ paymentResponse.gatewayStatusDescription }}</span>
      </div>

      <div class="detail-row">
        <span class="detail-label">Gateway Status Code</span>
        <span class="detail-value">{{ paymentResponse.gatewayStatusCode }}</span>
      </div>

      <div class="detail-row">
        <span class="detail-label">Merchant ID</span>
        <span class="detail-value">{{ paymentResponse.merchantId }}</span>
      </div>

      <div class="detail-row">
        <span class="detail-label">Message ID</span>
        <span class="detail-value">{{ paymentResponse.messageId }}</span>
      </div>

      <div class="detail-row">
        <span class="detail-label">Currency Code</span>
        <span class="detail-value">{{ paymentResponse.currencyIsoCode }}</span>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
      <button class="btn-secondary" (click)="printReceipt()">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="6 9 6 2 18 2 18 9"></polyline>
          <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path>
          <rect x="6" y="14" width="12" height="8"></rect>
        </svg>
        Print Receipt
      </button>
      
      <button class="btn-primary" (click)="backToPayment()">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="19" y1="12" x2="5" y2="12"></line>
          <polyline points="12 19 5 12 12 5"></polyline>
        </svg>
        New Payment
      </button>
    </div>

    <!-- Success Message -->
    <div *ngIf="isSuccess" class="success-footer">
      <p>Thank you for your payment. A confirmation has been processed.</p>
    </div>
  </div>
</div>