<div class="container">
  <div class="mada-logo">
    <svg viewBox="0 0 100 40" xmlns="http://www.w3.org/2000/svg">
      <text x="50" y="25" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#667eea">MADA</text>
    </svg>
  </div>

  <h1>SmartRoute Payment</h1>
  <p class="subtitle">Payone Direct Post Payment</p>

  <form (ngSubmit)="onSubmit()" #paymentForm="ngForm">
    <!-- Amount -->
    <div class="form-group">
      <label for="amount">Amount (SAR)*</label>
      <input
        type="number"
        id="amount"
        name="amount"
        [(ngModel)]="amount"
        step="0.01"
        required
        [disabled]="isLoading"
      />
      <div class="help-text">Enter amount in SAR. Example: 50.00</div>
    </div>

    <!-- Card Number -->
    <div class="form-group">
      <label for="cardNumber">Card Number (Mada)*</label>
      <input
        type="text"
        id="cardNumber"
        name="cardNumber"
        [(ngModel)]="cardNumber"
        (input)="formatCardNumber()"
        placeholder="4012001045873335"
        maxlength="19"
        required
        [disabled]="isLoading"
      />
      <div class="help-text">Test Mada BIN: 401200 (Al Rajhi), 508960 (SNB)</div>
    </div>

    <!-- Expiry Date -->
    <div class="row">
      <div class="col-6">
        <div class="form-group">
          <label for="expiryMonth">Expiry Month*</label>
          <select
            id="expiryMonth"
            name="expiryMonth"
            [(ngModel)]="expiryMonth"
            required
            [disabled]="isLoading"
          >
            <option value="">MM</option>
            <option *ngFor="let month of months" [value]="month">{{ month }}</option>
          </select>
        </div>
      </div>
      <div class="col-6">
        <div class="form-group">
          <label for="expiryYear">Expiry Year*</label>
          <select
            id="expiryYear"
            name="expiryYear"
            [(ngModel)]="expiryYear"
            required
            [disabled]="isLoading"
          >
            <option value="">YY</option>
            <option *ngFor="let year of years" [value]="year">{{ year }}</option>
          </select>
        </div>
      </div>
    </div>

    <!-- CVV -->
    <div class="form-group">
      <label for="securityCode">CVV*</label>
      <input
        type="text"
        id="securityCode"
        name="securityCode"
        [(ngModel)]="securityCode"
        placeholder="123"
        maxlength="4"
        required
        [disabled]="isLoading"
      />
    </div>

    <!-- Cardholder Name -->
    <div class="form-group">
      <label for="cardHolderName">Cardholder Name*</label>
      <input
        type="text"
        id="cardHolderName"
        name="cardHolderName"
        [(ngModel)]="cardHolderName"
        placeholder="Ahmed Ali"
        required
        [disabled]="isLoading"
      />
    </div>

    <!-- Payment Description (Optional) -->
    <div class="form-group">
      <label for="description">Payment Description</label>
      <input
        type="text"
        id="description"
        name="description"
        [(ngModel)]="description"
        placeholder="Test Payment (Optional)"
        [disabled]="isLoading"
      />
    </div>

    <!-- Item ID (Optional) -->
    <div class="form-group">
      <label for="itemId">Item ID</label>
      <input
        type="text"
        id="itemId"
        name="itemId"
        [(ngModel)]="itemId"
        placeholder="ITEM001 (Optional)"
        [disabled]="isLoading"
      />
    </div>

    <!-- Submit Button -->
    <button
      type="submit"
      class="btn"
      [disabled]="isLoading || !paymentForm.valid"
    >
      {{ isLoading ? 'Processing...' : 'Process Payment' }}
    </button>
  </form>

  <!-- Loading Spinner -->
  <div class="loading" *ngIf="isLoading">
    <div class="spinner"></div>
    <p>Processing payment...</p>
  </div>

  <!-- Alert Box -->
  <div
    *ngIf="showAlert"
    class="alert"
    [ngClass]="{
      'alert-success': alertType === 'success',
      'alert-error': alertType === 'error',
      'alert-info': alertType === 'info'
    }"
  >
    <strong>{{ alertType === 'success' ? '✓' : '✗' }}</strong>
    {{ alertMessage }}
  </div>
</div>